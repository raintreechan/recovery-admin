(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ff85dfb","chunk-55d8f1ee"],{"070e":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"treatDoc_Content"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"关键词："}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"请输入关键词",clearable:""},model:{value:e.userName2,callback:function(t){e.userName2=t},expression:"userName2"}})],1)],1),a("el-form-item",{attrs:{label:"职称："}},[a("el-col",{attrs:{span:22}},[a("el-select",{attrs:{placeholder:"请选择职称",clearable:""},model:{value:e.position2,callback:function(t){e.position2=t},expression:"position2"}},e._l(e.positionList,function(e){return a("el-option",{key:e.key,attrs:{value:e.key,label:e.value}})}),1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.checkUserList}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addUserClick}},[e._v("新增")])],1)],1),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.pageData.rows,height:e.tableHeight,"highlight-current-row":"",size:"small",border:""},on:{"row-dblclick":e.rowDblclick}},[a("el-table-column",{attrs:{prop:"userCode",label:"用户名",align:"center"}}),a("el-table-column",{attrs:{prop:"realName",label:"姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"sex",label:"性别",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"position",label:"职称",formatter:e.formatPosition,align:"center"}}),a("el-table-column",{attrs:{prop:"deptDataId",label:"科室",align:"center",formatter:e.formatDept}}),a("el-table-column",{attrs:{prop:"roleDataId",label:"角色",width:"120",formatter:e.formatRole,align:"center"}}),a("el-table-column",{attrs:{prop:"phoneNo",label:"手机号",align:"center"}}),a("el-table-column",{attrs:{prop:"isEnable",width:"90",label:"是否启用",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEnable?a("el-tag",{attrs:{type:"success"}},[e._v("是")]):a("el-tag",{attrs:{type:"danger"}},[e._v("否")])]}}])}),a("el-table-column",{attrs:{prop:"isAdmin",label:"是否管理员",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isAdmin?a("el-tag",{attrs:{type:"success"}},[e._v("是")]):a("el-tag",{attrs:{type:"danger"}},[e._v("否")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleClick(t.row.userDataId)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.removeClick(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageData.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("userInfoView",{attrs:{dialogVisible:e.dialogVisible,positionList:e.positionList,roleList:e.roleList,deptList:e.deptList,userInfoForm:e.userForm},on:{dialogValue:e.dialogValue,addUserInfo:e.addList}})],1)},r=[],s=(a("96cf"),a("3b8d")),l=a("d225"),n=a("b0b4"),i=a("308d"),u=a("6bb5"),c=a("4e2b"),d=a("9ab4"),p=a("60a3"),m=a("9e32"),f=a("1760"),b=a("eabe");function h(){return b["a"].get("/api/hosp/Hospitals/GetDeptList")}function g(){return b["a"].get("/api/hosp/Hospitals/GetRoles")}function I(){return b["a"].get("/api/basedata/ConstValues/GetPositions")}var v=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(i["a"])(this,Object(u["a"])(t).call(this)),e.userName2="",e.position2=null,e.checkBoolen=!0,e.dialogVisible=!1,e.loading=!1,e.userForm={userDataId:"",userCode:"",realName:"",password:"",sex:"",deptDataId:"",roleDataId:"",isEnable:!0,positionDataId:"",position:null,phoneNo:"",headImageFileDataId:"",birthDay:null,isAdmin:!1,userRole:""},e.deptList=[],e.positionList=[],e.roleList=[],e.tableHeight=window.innerHeight-160,e.pageData={pageSize:20,pageIndex:1,rows:[],totalCount:0},e.userName="",e.position=null,e.currentPage=1,e.pageSize=20,e}return Object(c["a"])(t,e),Object(n["a"])(t,[{key:"created",value:function(){var e=this;this.getUserList(),h().then(function(t){e.deptList=t}),I().then(function(t){e.positionList=t}),g().then(function(t){e.roleList=t})}},{key:"formatPosition",value:function(e,t){for(var a=0;a<this.positionList.length;a++){var o=this.positionList[a];if(e.position===o.key)return o.value}return"-"}},{key:"formatDept",value:function(e,t){for(var a=0;a<this.deptList.length;a++){var o=this.deptList[a];if(e.deptDataId===o.deptDataId)return o.deptName}return"-"}},{key:"formatRole",value:function(e,t){for(var a=0;a<this.roleList.length;a++){var o=this.roleList[a];if(e.roleDataId===o.roleDataId)return o.roleName}return"-"}},{key:"addUserClick",value:function(){this.dialogVisible=!0}},{key:"dialogValue",value:function(e){this.userForm={userDataId:"",userCode:"",realName:"",password:"",sex:"",deptDataId:"",roleDataId:"",isEnable:!0,positionDataId:"",position:null,phoneNo:"",headImageFileDataId:"",birthDay:null,isAdmin:!1,userRole:""},this.dialogVisible=e}},{key:"checkUserList",value:function(){this.userName=this.userName2,this.position=this.position2,this.getUserList()}},{key:"addList",value:function(){this.getUserList(),this.userForm={userDataId:"",userCode:"",realName:"",password:"",sex:"",deptDataId:"",roleDataId:"",isEnable:!0,positionDataId:"",position:null,phoneNo:"",headImageFileDataId:"",birthDay:null,isAdmin:!1}}},{key:"getUserList",value:function(){var e=this;this.loading=!0,Object(m["f"])({name:this.userName,position:this.position,pageIndex:this.currentPage,pageSize:this.pageSize}).then(function(t){e.loading=!1,e.pageData=t}).catch(function(t){e.loading=!1})}},{key:"handleCurrentChange",value:function(e){this.currentPage=e,this.getUserList()}},{key:"handleSizeChange",value:function(e){this.pageSize=e,this.getUserList()}},{key:"rowDblclick",value:function(e){this.handleClick(e.userDataId)}},{key:"handleClick",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogVisible=!0,e.next=3,Object(m["e"])(t);case 3:this.userForm=e.sent,""==this.userForm.leaderUserDataId&&this.$set(this.userForm,"userRole","parentUserDataId"),""==this.userForm.parentUserDataId&&this.$set(this.userForm,"userRole","leaderUserDataId");case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeClick",value:function(e){var t=this;console.log(e),this.$confirm("是否删除  ".concat(e.realName," 项目?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(m["b"])(e.userDataId).then(function(e){console.log(e),t.getUserList()})})}},{key:"mounted",value:function(){}}]),t}(p["d"]);v=d["a"]([Object(p["a"])({components:{userInfoView:f["default"]}})],v);var y=v,k=y,D=(a("3a0d"),a("2877")),F=Object(D["a"])(k,o,r,!1,null,"5108c996",null);t["default"]=F.exports},"0fb3":function(e,t,a){"use strict";var o=a("86e3"),r=a.n(o);r.a},1760:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"user_form",attrs:{title:e.userInfoForm.userDataId?"用户管理":"用户添加",width:"600px",visible:e.isShow,closeOnClickModal:!1},on:{close:function(t){return e.closeDialog("userInfoForm")},"update:visible":function(t){e.isShow=t}}},[a("el-form",{ref:"userInfoForm",attrs:{"label-width":"100px",model:e.userInfoForm}},[a("el-form-item",{attrs:{label:"用户名",prop:"userCode",rules:[{required:!0,message:"用户名不能为空",trigger:"blur"}]}},[a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{maxlength:"11"},model:{value:e.userInfoForm.userCode,callback:function(t){e.$set(e.userInfoForm,"userCode",t)},expression:"userInfoForm.userCode"}})],1)],1),a("el-form-item",{attrs:{label:"密码",prop:"password",rules:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:8,max:16,message:"密码长度为 8 到 16 个字符",trigger:"blur"}]}},[a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{maxlength:"16",type:"password"},model:{value:e.userInfoForm.password,callback:function(t){e.$set(e.userInfoForm,"password",t)},expression:"userInfoForm.password"}})],1)],1),a("el-form-item",{attrs:{label:"姓名",prop:"realName",rules:[{required:!0,message:"姓名不能为空",trigger:"blur"}]}},[a("el-col",{attrs:{span:16}},[a("el-input",{model:{value:e.userInfoForm.realName,callback:function(t){e.$set(e.userInfoForm,"realName",t)},expression:"userInfoForm.realName"}})],1)],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.userInfoForm.sex,callback:function(t){e.$set(e.userInfoForm,"sex",t)},expression:"userInfoForm.sex"}},[a("el-radio",{attrs:{label:"男"}}),a("el-radio",{attrs:{label:"女"}})],1)],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"出生日期"}},[a("el-col",{attrs:{span:16}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.userInfoForm.birthDay,callback:function(t){e.$set(e.userInfoForm,"birthDay",t)},expression:"userInfoForm.birthDay"}})],1)],1)],1),a("el-form-item",{attrs:{label:"科室"}},[a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择科室"},model:{value:e.userInfoForm.deptDataId,callback:function(t){e.$set(e.userInfoForm,"deptDataId",t)},expression:"userInfoForm.deptDataId"}},e._l(e.deptList,function(e){return a("el-option",{key:e.deptDataId,attrs:{label:e.deptName,value:e.deptDataId}})}),1)],1)],1),e.userInfoForm.isAdmin?e._e():a("el-form-item",{attrs:{label:"职称"}},[a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择职称"},model:{value:e.userInfoForm.position,callback:function(t){e.$set(e.userInfoForm,"position",t)},expression:"userInfoForm.position"}},e._l(e.positionList,function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}),1)],1)],1),a("el-form-item",{attrs:{label:"角色"}},[a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择角色"},model:{value:e.userInfoForm.roleDataId,callback:function(t){e.$set(e.userInfoForm,"roleDataId",t)},expression:"userInfoForm.roleDataId"}},e._l(e.roleList,function(e){return a("el-option",{key:e.roleDataId,attrs:{label:e.roleName,value:e.roleDataId}})}),1)],1)],1),a("el-form-item",{attrs:{label:"手机号",prop:"phoneNo",rules:[{required:!1,pattern:/^0{0,1}(13[0-9]|15[0-9]|17[0-9]|18[0-9])[0-9]{8}$/,message:"手机号格式不对"}]}},[a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{maxlength:"11"},model:{value:e.userInfoForm.phoneNo,callback:function(t){e.$set(e.userInfoForm,"phoneNo",e._n(t))},expression:"userInfoForm.phoneNo"}})],1)],1),a("el-form-item",{attrs:{label:"领导用户",prop:"leaderUserDataId"}},[a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择用户列表"},model:{value:e.userInfoForm.leaderUserDataId,callback:function(t){e.$set(e.userInfoForm,"leaderUserDataId",t)},expression:"userInfoForm.leaderUserDataId"}},e._l(e.userRole,function(e,t){return a("el-option",{key:t,attrs:{label:e.realName,value:e.userDataId}})}),1)],1)],1),a("el-form-item",{attrs:{label:"是否启用"}},[a("el-radio-group",{model:{value:e.userInfoForm.isEnable,callback:function(t){e.$set(e.userInfoForm,"isEnable",t)},expression:"userInfoForm.isEnable"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.closeDialog("userInfoForm")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("userInfoForm",!0)}}},[e._v(e._s(e.userInfoForm.userDataId?"修改":"添加"))]),e.userInfoForm.userDataId?e._e():a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("userInfoForm",!1)}}},[e._v("添加并关闭窗口")])],1)],1)},r=[],s=a("d225"),l=a("b0b4"),n=a("308d"),i=a("6bb5"),u=a("4e2b"),c=a("9ab4"),d=a("60a3"),p=a("9e32"),m=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(n["a"])(this,Object(i["a"])(t).call(this)),e.isShow=!1,e.dialogVisible=!1,e.userRole=[],e}return Object(u["a"])(t,e),Object(l["a"])(t,[{key:"onDialogVisibleChange",value:function(e){this.isShow=e}},{key:"isShowSelect",value:function(){!0===this.isShow&&(this.upSelectDate(),console.log(this.isShow))}},{key:"upSelectDate",value:function(){var e=this;Object(p["f"])({pageIndex:0,pageSize:99999}).then(function(t){e.userRole=t.rows,console.log(t)}).catch(function(e){console.log(e)})}},{key:"resetForm",value:function(e){e&&this.$refs[e].resetFields()}},{key:"submitForm",value:function(e,t){var a=this;this.$refs[e].validate(function(o){if(!o)return!1;a.userInfoForm.userDataId?(console.log(a.userInfoForm),Object(p["g"])(a.userInfoForm.userDataId,a.userInfoForm).then(function(o){o.isSuccess?(t||a.closeDialog(e),a.$message({message:"修改成功",type:"success"})):a.$message({message:"修改失败",type:"error"})}).catch(function(){a.$message({message:"修改失败",type:"error"})})):(console.log(a.userInfoForm),Object(p["a"])(a.userInfoForm).then(function(o){o.isSuccess?(t||a.closeDialog(e),a.resetForm(e),a.$message({message:"添加成功",type:"success"}),a.$emit("addUserInfo")):a.$message({message:"添加失败",type:"error"})}))})}},{key:"closeDialog",value:function(e){this.resetForm(e),this.$emit("dialogValue",!1)}}]),t}(d["d"]);c["a"]([Object(d["b"])({default:!1})],m.prototype,"dialogVisible",void 0),c["a"]([Object(d["b"])({})],m.prototype,"userInfoForm",void 0),c["a"]([Object(d["b"])({default:new Array})],m.prototype,"deptList",void 0),c["a"]([Object(d["b"])({default:new Array})],m.prototype,"roleList",void 0),c["a"]([Object(d["b"])({default:new Array})],m.prototype,"positionList",void 0),c["a"]([Object(d["e"])("dialogVisible")],m.prototype,"onDialogVisibleChange",null),c["a"]([Object(d["e"])("isShow")],m.prototype,"isShowSelect",null),m=c["a"]([d["a"]],m);var f=m,b=f,h=(a("0fb3"),a("2877")),g=Object(h["a"])(b,o,r,!1,null,null,null);t["default"]=g.exports},"3a0d":function(e,t,a){"use strict";var o=a("ddbe"),r=a.n(o);r.a},"86e3":function(e,t,a){},ddbe:function(e,t,a){}}]);